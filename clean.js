const fs=require('fs');const path=require('path');const IGNORE_DIRS=['node_modules','.git','dist','build'];const jsRegex=/("(?:\\.|[^"\\])*")|('(?:\\.|[^'\\])*')|(`(?:\\.|[^`\\])*`)|(\\/\\*[\\s\\S]*?\\*\\/)|(\\/\\/.*)/g;const htmlRegex=/<!--[\\s\\S]*?-->/g;function processFile(filePath){const ext=path.extname(filePath).toLowerCase();let content=fs.readFileSync(filePath,'utf8');let original=content;if(ext==='.js'){content=content.replace(jsRegex,(match,dq,sq,tl,multiline,singleline)=>{if(multiline||singleline)return '';return match;});content=content.replace(/^\\s*[\\r\\n]/gm,'');}else if(ext==='.html'){content=content.replace(htmlRegex,'');}if(content!==original){fs.writeFileSync(filePath,content,'utf8');console.log(`Cleaned: ${filePath}`);}}function walkDirectory(dir){const files=fs.readdirSync(dir);for(const file of files){const fullPath=path.join(dir,file);const stat=fs.statSync(fullPath);if(stat.isDirectory()){if(!IGNORE_DIRS.includes(file)){walkDirectory(fullPath);}}else if(stat.isFile()){const ext=path.extname(fullPath).toLowerCase();if(ext==='.js'||ext==='.html'){processFile(fullPath);}}}}const targetDir=process.argv[2]||__dirname;console.log(`Starting comment cleanup in: ${targetDir}...`);walkDirectory(targetDir);console.log('Done!');